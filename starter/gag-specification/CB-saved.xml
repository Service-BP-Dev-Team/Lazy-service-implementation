<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<GAG name="My GAG">
	<service axiom="true" name="B" exampleSignature="book-order-example">
		<input name="order" shortName="order" />
		<output name="deliveryInfo" shortName="deliv" />
		<production name="P1" subServices="Deliver Validate">
		
			<semantic>
				<function-declaration
					location="D:\Implementation-to-deploy-book-order-simplified\Workspace-java\LocalFunctions\bin" method="c.general.book.Util.makeOffer" name="user" />
				<function-declaration
					location="D:\Implementation-to-deploy-book-order-simplified\Workspace-java\LocalFunctions\bin" method="c.one.Util.computeFees" name="computeFees" />
				
				<action>
					<leftpart service="B" parameter="deliveryInfo" />
					<rightpart
						xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
						xsi:type="idExpression" service="Deliver" parameter="deliveryInfo" />
				</action>
				<action>
					<leftpart service="Validate" parameter="offer" />
					<rightpart
						xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
						xsi:type="functionExpression" function="user">
						<arg service="B" parameter="order" />
					</rightpart>
				</action>
				<action>
					<leftpart service="Validate" parameter="paymentFees" />
					<rightpart
						xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
						xsi:type="functionExpression" function="computeFees">
						<arg service="B" parameter="order" />
					</rightpart>
				</action>
				<action>
					<leftpart service="Deliver" parameter="offer" />
					<rightpart
						xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
						xsi:type="idExpression" service="Validate" parameter="offer" />
				</action>
				<action>
					<leftpart service="Deliver" parameter="validation" />
					<rightpart
						xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
						xsi:type="idExpression" service="Validate" parameter="validation" />
				</action>
			</semantic>
		</production>
	</service>
	<service name="Validate" remote="true" location="CA">
		<input name="offer" shortName="offer" />
		<input name="paymentFees" shortName="fees" />
		<output name="validation" shortName="val" />
		
	</service>
	<service  name="Deliver" >
		<input name="offer" shortName="offer" />
		<input name="validation" shortName="val" />
		<output name="deliveryInfo" shortName="deliv" />
		<production name="P2" >
			<guard location="D:\Implementation-to-deploy-book-order-simplified\Workspace-java\LocalFunctions\bin" method="c.one.Util.guardP2" />
			<semantic>
			<function-declaration
					location="D:\Implementation-to-deploy-book-order-simplified\Workspace-java\LocalFunctions\bin" method="c.one.Util.getDeliverLink" name="getDeliverLink" />
				<action>
					<leftpart service="Deliver" parameter="deliveryInfo" />
					<rightpart
						xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
						xsi:type="functionExpression" function="getDeliverLink">
						<arg service="Deliver" parameter="offer" />
					</rightpart>
				</action>
			</semantic>
		</production>
	</service>
</GAG>